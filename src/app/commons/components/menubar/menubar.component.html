<script src="../../../admin/admin.module.ts"></script>
<mat-list color="primary" class="seshat-toolbar p-2">
  <mat-list-item class="seshat-menubar-title">
    <div class="w-100 d-flex justify-content-between align-items-center pt-3">
        <div class="seshat-logo"><img src="../assets/images/seshat-logo.png" alt="Seshat"></div>
        <button mat-icon-button>
          <mat-icon class="example-icon" [matBadge]="notifCount ? notifCount.toString() : null" matBadgeColor="warn"
                    (click)="displayNotifications()">
            notification_important</mat-icon>
        </button>
    </div>

  </mat-list-item>

  <div *ngIf="userData; then nameMenuItem"></div>

  <ng-template #nameMenuItem>
    <mat-list-item class="mt-1">
      <div class="d-flex justify-content-between align-items-center">
        <div class="logged-in-circle mr-1"></div>
        <h1>{{userData.first_name}}</h1>
      </div>
    </mat-list-item>
  </ng-template>

  <div *ngIf="this.userData && this.userData.type === 'admin'; then adminMenu">
  </div>
  <ng-template #adminMenu>
    <mat-list-item class="campaigns-menu-item mt-4">
        <!-- <h1>Campaigns</h1>  -->
        <mat-accordion [hideToggle]="campaignsData.length === 0" displayMode="flat">
        <mat-expansion-panel class="mat-elevation-z0">
          <mat-expansion-panel-header>
            <mat-panel-title class="m-0" [routerLink]="['/admin']">
              <h1>Campaigns &nbsp; &nbsp;</h1>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <span [routerLink]="['/admin', 'campaign', campaign.slug]" *ngFor="let campaign of campaignsData">
            <h2>{{ campaign.name }}</h2>
          </span>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-list-item>

    <mat-list-item class="mt-1">
        <h1 class="navLink" [routerLink]="['/admin', 'annotators']">Annotators</h1>
    </mat-list-item>

    <!--
    <mat-list-item *ngIf="campaignsData">
      <button mat-button [matMenuTriggerFor]="menu">Campaigns</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item [routerLink]="['/admin', 'campaign', campaign.slug]"
                *ngFor="let campaign of campaignsData">{{campaign.name}}</button>
      </mat-menu>

    </mat-list-item>
    -->
  </ng-template>

  <div *ngIf="this.userData && this.userData.type === 'annotator'; then annotatorMenu">
  </div>

  <ng-template #annotatorMenu>
    <mat-list-item>
      <span>Tasks</span>
    </mat-list-item>
  </ng-template>

  <mat-list-item class="mt-5">
    <button mat-icon-button
            (click)="logout()">
      <span class="d-flex align-items-center w-100">Logout<mat-icon class="ml-1">exit_to_app</mat-icon></span>
    </button>
  </mat-list-item>

  <mat-list-item class="fixed-bottom pl-1 pb-3">
    <h2>Â© CoML 2019</h2>
  </mat-list-item>
</mat-list>
